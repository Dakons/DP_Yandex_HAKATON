import sys
import os
import time
#import threading

# Получаем путь к директории ROBOT
parent_dir = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
sys.path.append(parent_dir)

from libs.DP_Regulator import PIDRegulator
from libs.DP_Filter import Filter
import libs.DP_sonar as Ultrasonic
import libs.DP_MotorMoveLibr as Motor
from libs.DP_teleplot import TelemetrySender
from libs.DP_servo import Servo
import libs.DP_MotorMovements as Movement


DataTeleplot = TelemetrySender()
SonarFilter = Filter(5, 0.3)

sonarServo = Servo(ANGLE_MAX=180, ANGLE_MIN=0, servonum=7)
sonarServo.set(180)

while True:
    try:
        Dist = Ultrasonic.get_distance()
        Dist_filtered = round(SonarFilter.filter(Dist))
        #print(f"Raw distance: {Dist}, Filtered distance: {Dist_filtered}")
        
        #DataTeleplot.send_telemetry("DISTANTION", Dist_filtered)
        time.sleep(0.01)
    except Exception as e:
        print(f"Error:
